#include <stdio.h>
#include <stdlib.h>
#include <time.h>

const int N=3;

int main() {
	srand(time(NULL));
	
	int m[N][N];
	int sum_x1=0, sum_x2=1, sum_x3=2;
	int sum_y1=0, sum_y2=1, sum_y3=2;
	int k=0;
	
	//генерация магического квадрата//
	while(!(sum_x1==sum_x2 && sum_x2==sum_x3 && sum_y1==sum_y2 && sum_y2==sum_y3)) {
		for(int i=0; i<N; i++) {
			for(int j=0; j<N; j++) {
				m[i][j]=rand()%9;
			}
		}
		
		sum_x1=m[0][0]+m[0][1]+m[0][2];
		sum_x2=m[1][0]+m[1][1]+m[1][2];
		sum_x3=m[2][0]+m[2][1]+m[2][2];
		sum_y1=m[0][0]+m[1][0]+m[2][0];
		sum_y2=m[0][1]+m[1][1]+m[2][1];
		sum_y3=m[0][2]+m[1][2]+m[2][2];
		
		k++;
	}
	
	//вывод матрицы//
	printf("Matrix MAGIC SQUARE:\n");
	for(int i=0; i<N; i++) { 
 		for (int j=0; j<N; j++) {
       		printf("%4d",m[i][j]);
       }
	printf("\n");
	}
	
	printf("\nNumber of generations: %d",k);
}
